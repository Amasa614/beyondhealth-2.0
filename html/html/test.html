<!DOCTYPE html>
<html>
  <head>
    <title>PDF Generation Test</title>
    <!-- Include any necessary CSS or stylesheets -->
  </head>
  <body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/2.2.1/pdf-lib.min.js"></script>
    <button id="downloadPdf">Download PDF</button>

    <script>
      document.addEventListener("DOMContentLoaded", async function () {
        const { PDFDocument } = PDFLib;

        const downloadPdfButton = document.getElementById("downloadPdf");
        downloadPdfButton.addEventListener("click", async () => {
          const pdfDoc = await PDFDocument.create(); // Create a new PDF document
          const page = pdfDoc.addPage();
          const { width, height } = page.getSize();

          const fontSize = 12;
          const text = "Sample Text"; // Replace with your desired text
          const lines = text.split("<br>").map((line) => line.trim());

          page.setFontSize(fontSize);

          let currentY = height - 50;
          for (const line of lines) {
            const textWidth = page.getTextWidth(line);
            const textHeight = fontSize;

            if (currentY - textHeight < 50) {
              page = pdfDoc.addPage();
              currentY = height - 50;
            }

            page.drawText(line, {
              x: (width - textWidth) / 2,
              y: currentY,
            });

            currentY -= textHeight;
          }

          const pdfBytes = await pdfDoc.save();
          const blob = new Blob([pdfBytes], { type: "application/pdf" });

          // Create a download link and trigger the download
          const link = document.createElement("a");
          link.href = URL.createObjectURL(blob);
          link.download = "my_document.pdf";
          link.click();
        });
      });
    </script>
  </body>
</html>
